<div class="panel panel-default">
    <div class="panel-body">
        <div class="form-group">
            <label class="col-sm-2 control-label">Entity Name</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" placeholder="Name" ng-model="vm.entity.name">
            </div>
        </div>
        <div ng-hide="vm.childVendors.length > 0">
            <div class="line line-dashed b-b line-lg pull-in"></div>
            <div class="form-group">
                <label class="col-sm-2 control-label">Parent Vendor</label>
                <div class="col-sm-4">
                    <select class="form-control" chosen ng-model="vm.entity.parentRecordId"
                            ng-options="item.id as item.name for item in vm.lists.otherVendors | orderBy:'item.name'">
                        <option value=""></option>
                    </select>
                </div>
                <div class="col-sm-6">
                    <a href ui-sref="vendors.edit({ id: vm.entity.parentRecordId })"
                       class="btn btn-default">Open Parent</a>
                </div>
            </div>
        </div>
        <div class="line line-dashed b-b line-lg pull-in"></div>
        <div class="form-group">
            <label class="col-sm-2 control-label">Vendor Type</label>
            <div class="col-sm-4">
                <select class="form-control" chosen ng-model="vm.entity.typeId"
                        ng-options="item.id as item.name for item in vm.lists.vendorTypes | orderBy:'item.name'"></select>
            </div>
            <label class="col-sm-2 control-label">Location</label>
            <div class="col-sm-4">
                <select class="form-control" chosen ng-model="vm.entity.locationId"
                        ng-options="item.id as item.name for item in vm.lists.locations | orderBy:'item.name'"></select>
            </div>
        </div>
    </div>
</div>
<div class="panel panel-default">
    <div class="panel-heading font-bold">Sales Person Information</div>
    <div class="panel-body">
        <div class="form-group">
            <label class="col-sm-2 control-label">First Name</label>
            <div class="col-sm-4">
                <input type="text" class="form-control" placeholder="First Name" ng-model="vm.entity.firstName">
            </div>
            <label class="col-sm-2 control-label">Last Name</label>
            <div class="col-sm-4">
                <input type="text" class="form-control" placeholder="Last Name" ng-model="vm.entity.lastName">
            </div>
        </div>
        <div class="line line-dashed b-b line-lg pull-in"></div>
        <div class="form-group">
            <label class="col-sm-2 control-label">National Id</label>
            <div class="col-sm-4">
                <input type="text" class="form-control" placeholder="National Id" ng-model="vm.entity.nationalId">
            </div>
            <label class="col-sm-2 control-label">Mobile Number</label>
            <div class="col-sm-4">
                <div class="input-group m-b">
                    <span class="input-group-addon">+{{ country.CountryCallingCode }}</span>
                    <input type="text" class="form-control" placeholder="Mobile Number" ng-model="vm.entity.mobileNumber" ng-pattern="/[0-9]$/" phone-number required />
                </div>
            </div>
        </div>
    </div>
</div>
<div class="panel panel-default">
    <div class="panel-heading font-bold">Access Information</div>
    <div class="panel-body">
        <div class="form-group">
            <label class="col-sm-2 control-label">User Name</label>
            <div class="col-sm-4">
                <input type="text" class="form-control" placeholder="User Name" ng-model="vm.entity.userName">
            </div>
        </div>
        <div class="line line-dashed b-b line-lg pull-in"></div>
        <div class="form-group">
            <label class="col-sm-2 control-label" translate>Password</label>
            <div class="col-sm-4">
                <input type="password" class="form-control" placeholder="{{ 'Password'|translate }}" ng-model="password.NewPassword">
            </div>
        </div>
        <div class="line line-dashed b-b line-lg pull-in"></div>
        <div class="form-group">
            <label class="col-sm-2 control-label" translate>Confirm Password</label>
            <div class="col-sm-4">
                <input type="password" class="form-control" placeholder="{{ 'Confirm Password'|translate }}" ng-model="password.ConfirmPassword"
                       ui-validate="'$value==password.NewPassword'" ui-validate-watch="'password.NewPassword'">
            </div>
        </div>
    </div>
</div>

<tabset justified="true" class="tab-container grid" ng-if="!vm.isNew">
    <tab heading="Used Vouchers">
        <div class="panel panel-default">
            <sub-grid filter="{
                       'and': [
                        { status: { '==': 2 } },
                        { 'or': [
                            {'vendorId': { '==': vm.entity.id }},
                            {'vendor.parentRecordId': { '==': vm.entity.id }}
                          ]
                        }]
                      }"
                      collection="VoucherTransactionRecords"
                      expand="beneficiary, voucher, voucher.category"
                      entity="vm.entity">
                <sub-grid-column label="#" field="id" width="40"></sub-grid-column>
                <sub-grid-column label="Beneficiary" field="beneficiary.firstName">
                    <div class="ui-grid-cell-contents">
                        {{ row.entity.beneficiary.firstName }} {{ row.entity.beneficiary.lastName }}
                    </div>
                </sub-grid-column>
                <sub-grid-column label="Voucher Code" field="voucher.voucherCode"></sub-grid-column>
                <sub-grid-column label="Value" field="voucher.category.value"></sub-grid-column>
                <sub-grid-column label="Created On" field="createdOn"><div class="ui-grid-cell-contents">{{row.entity.createdOn|localeDateTime}}</div></sub-grid-column>
                <sub-grid-column label="Used On" field="finalizedOn"><div class="ui-grid-cell-contents">{{row.entity.finalizedOn|localeDateTime}}</div></sub-grid-column>
                <sub-grid-column label="Status" field="status"><div class="ui-grid-cell-contents">{{row.entity.statusString}}</div></sub-grid-column>
            </sub-grid>
        </div>
    </tab>
    <tab heading="Child Vendors" ng-if="!vm.entity.parentRecordId">
        <div class="panel panel-default">
            <sub-grid collection="Vendors"
                      key="parentRecordId"
                      entity="vm.entity">
                <sub-grid-column label="#" field="id" width="40"></sub-grid-column>
                <sub-grid-column label="Name" field="name">
                </sub-grid-column>
                <sub-grid-column label="Actions" name="Actions" width="100">
                    <div class="ui-grid-cell-contents">
                        <div class="btn-group">
                            <a href ui-sref="vendors.edit({ id: row.entity.id })"
                               class="btn btn-default btn-xs">Open</a>
                        </div>
                    </div>
                </sub-grid-column>
            </sub-grid>
        </div>
    </tab>
</tabset>
